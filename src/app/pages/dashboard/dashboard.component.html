<main>
    <div class="container py-5">
      <div class="row">
        <div class="col-12">
          <h4>Dashboard</h4>
          <span class="sub-topic">any text here</span>
        </div>
      </div>
      <div *ngIf="!!!this.displayData" class="d-flex align-items-center justify-content-center pt-3">
        <span class="spinner-grow spinner-grow-sm" role="status" aria-hidden="true"></span>&nbsp;Loading...
      </div>
      <div class="row g-1 pt-3" *ngIf="!!this.displayData">
            <div class="col-12">
                <div class="card card-grey box-left h-100">
                    <div class="card-body ps-3">
                        <p class="card-text sub-topic">
                            Total Value Locked
                        </p>
                        <h3 class="card-title">
                            <span>{{ +this.displayData?.tvl?.total / UNIT || 0 | shortNum }}</span>
                            <i class="fas fa-info-circle info-icon margin-left-auto float-end md-icon mg-18 sub-topic"
                            mdbTooltip="Total quantity of SPEC tokens staked and ratio of the quantity of staked SPEC tokens to the circulation supply"></i>
                        </h3>
                        <div class="mt-2">
                            <div class="progress" style="height: 10px; border-radius: 6px;">
                                <div class="progress-bar bg-gov" 
                                    role="progressbar"
                                    [style.width.%]="this.tvlData.gov.percentage">
                                </div>
                                <div class="progress-bar bg-lpVaults"
                                    role="progressbar" 
                                    [style.width.%]="this.tvlData.lpVaults.percentage">
                                </div>
                            </div>
                            <div class="mt-3">
                                <div class="grid-container">
                                    <div class="legend">
                                        <p class="card-text sub-topic">Gov</p>
                                        <div class="sq-color bg-gov"></div>
                                        <span class="card-text sub-topic img-txt">{{ this.tvlData?.gov.shortValue }} UST</span>
                                    </div>
                                    <div class="legend">
                                        <p class="card-text sub-topic">LP Vault</p>
                                        <div class="sq-color bg-lpVaults"></div>
                                        <span class="card-text sub-topic img-txt">{{ this.tvlData?.lpVaults.shortValue }} UST</span>
                                    </div>
                                  </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-12">
                <div class="card card-grey box-left h-100">
                    <div class="card-body ps-3" style="min-height: 100px;">
                        <div class="float-start">
                            <p class="card-text sub-topic">
                                Market Cap
                            </p>
                            <h3 class="card-title">
                                <span>{{ +this.displayData?.spec?.marketCap / UNIT || 0 | shortNum }}</span>
                            </h3>
                        </div>
                        <div class="float-end pe-2">
                            <div class="d-flex align-items-center">
                                <div>
                                    <img class="mt-4" src="../../../assets/Icon _ DropDown.svg" width="22">
                                </div>
                                <div class="flex-grow-1">
                                    <p class="card-text sub-topic">
                                        SPEC Price
                                    </p>
                                    <h3 class="card-title">
                                        <span>{{ +this.displayData?.spec?.price || 0 | shortNum }} UST</span>
                                        <a role="button" class="text-light small"
                                        ><img class="mg-3" width="24" src="../../../assets/Icon _ ExitToApp.svg"></a>
                                    </h3>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-12">
                <div class="card card-grey box-left h-100">
                    <div class="card-body ps-3">
                        <p class="card-text sub-topic">
                            TVL Timeline
                        </p>
                        <h3 class="card-title">
                            <span>{{ +this.displayData?.tvl?.total / UNIT || 0 | shortNum }}</span>
                            <i class="fas fa-info-circle info-icon margin-left-auto float-end md-icon mg-18 sub-topic"
                            mdbTooltip="Total quantity of SPEC tokens staked and ratio of the quantity of staked SPEC tokens to the circulation supply"></i>
                        </h3>
                    </div>
                    <ngx-charts-area-chart-stacked
                        class="chart-container"
                        [view]="viewArea"
                        [timeline]="true"
                        [scheme]="colorAreaChart"
                        [xAxis]="xAxisArea"
                        [yAxis]="yAxisArea"
                        [timeline]="timelineArea"
                        [results]="graphData"
                        [gradient]="gradient">
                        <ng-template #seriesTooltipTemplate let-model="model">
                            <span class="text-red">{{ displayVal(model) }}</span><br>
                            <span>{{ displayTimeLine(model) | date:'EEE, LLL d YYYY' }}</span>
                        </ng-template>
                    </ngx-charts-area-chart-stacked>
                </div>
            </div>
            <div class="col-12 col-md-6">
                <div class="card card-grey box-left">
                    <div class="card-body ps-3">
                        <p class="card-text sub-topic">
                            Spec Circulation
                        </p>
                        <h3 class="card-title">
                            <span>{{ this.displayData?.spec?.circulation | number: '1.0-2' }}</span>
                            <i class="fas fa-info-circle info-icon margin-left-auto float-end md-icon mg-18 sub-topic"
                            mdbTooltip="Total quantity of SPEC tokens staked and ratio of the quantity of staked SPEC tokens to the circulation supply"></i>
                        </h3>
                        <div class="d-flex justify-content-between">
                            <div>
                                <div class="d-flex align-items-start flex-column" style="height: 200px;">
                                    <div class="mb-auto p-2"></div>
                                    <div class="mb-3">
                                        <p class="card-text sub-topic">
                                            Staked
                                        </p>
                                        <h3 class="card-text">
                                            <div class="sq-color bg-gov"></div>
                                            <span class="img-txt">
                                                {{ this.displayData?.circulation?.gov | number: '1.0-2'  }} SPEC</span>
                                        </h3>
                                    </div>
                                    <div class="mb-3">
                                        <p class="card-text sub-topic">
                                            LP
                                        </p>
                                        <h3 class="card-text">
                                            <div class="sq-color bg-lpVaults"></div>
                                            <span class="img-txt">
                                                {{ this.displayData?.circulation?.lpVaults | number: '1.0-2' }} SPEC</span>
                                        </h3>
                                    </div>
                                    <div class="mb-3">
                                        <p class="card-text sub-topic">
                                            Other
                                        </p>
                                        <h3 class="card-text">
                                            <div class="sq-color bg-other"></div>
                                            <span class="img-txt">
                                                {{ this.displayData?.circulation?.others | number: '1.0-2' }} SPEC</span>
                                        </h3>
                                    </div>
                                  </div>                                  
                            </div>
                            <div class="bottom-right">
                                <ngx-charts-pie-chart [view]="[160, 160]" 
                                [tooltipText]="formatDataLabel"
                                [results]="specCirculationData" 
                                [scheme]="colorScheme" 
                                [gradient]="false"
                                [legend]="false" 
                                [labels]="false" 
                                [doughnut]="true">
                            </ngx-charts-pie-chart>
                            </div>
                       </div>
                    </div>
                </div>
            </div>
            <div class="col-6 col-md-3">
                <div class="card card-grey box-left h-100">
                    <div class="card-body ps-3">
                        <p class="card-text sub-topic">
                            Earning
                        </p>
                        <h3 class="card-title">
                            <span>{{ this.displayData?.stat?.total?.earning | unit: 6: '1.0-2' }} UST</span>
                        </h3>
                        <p class="card-text sub-topic mt-3">
                            Buyback
                        </p>
                        <h3 class="card-title">
                            <span>{{ this.displayData?.stat?.total?.buybackSpec | unit: 6: '1.0-2' }} SPEC</span>
                        </h3>
                        <p class="card-text sub-topic mt-3">
                            Total Burn
                        </p>
                        <h3 class="card-title">
                            <span>{{ this.displayData?.stat?.total?.totalBurn | unit: 6: '1.0-2' }} SPEC</span>
                        </h3>
                    </div>
                </div>
            </div>
            <div class="col-6 col-md-3">
                <div class="card card-grey box-left h-100">
                    <div class="card-body ps-3">
                        <p class="card-text sub-topic">
                            Earning ( 7 Day )
                        </p>
                        <h3 class="card-title">
                            <span>{{ this.displayData?.stat?.last7?.earning | unit: 6: '1.0-2' }} UST</span>
                        </h3>
                        <p class="card-text sub-topic mt-3">
                            Buyback ( 7 Day )
                        </p>
                        <h3 class="card-title">
                            <span>{{ this.displayData?.stat?.last7?.buybackSpec | unit: 6: '1.0-2' }} SPEC</span>
                        </h3>
                        <p class="card-text sub-topic mt-3">
                            Total Burn ( 7 Day )
                        </p>
                        <h3 class="card-title">
                            <span>{{ this.displayData?.stat?.last7?.totalBurn | unit: 6: '1.0-2' }} SPEC</span>
                        </h3>
                    </div>
                </div>
            </div>
        </div>
    </div>
</main>